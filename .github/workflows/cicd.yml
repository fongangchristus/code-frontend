name: Integration continue
on: 
  push:
      branches: 
        - develop
        - 'feature-**'
  pull_request:
      branches: 
        - develop    
jobs:
  compil_test_build:
  
    runs-on: ubuntu-latest

    steps:
    - name: Checkout du code source
      uses: actions/checkout@v2
    - name: Set up JDK
      uses: actions/setup-java@v2
      with:
        java-version: '17'
        distribution: 'adopt'

    - name: Compilation avec Maven
      run: mvn clean compile

    - name: Exécution des tests unitaires
      run: mvn test

    - name: Exécution des tests d'intégration
      run: mvn clean verify       

    - name: Build de l'artefact Quarkus
      run: mvn clean package

    - name: Affiche les fichiers générés
      run: ls target/quarkus-app/